
<ui:composition lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<!-- START OF TOP include_viewContentLeads -->
	<!-- MOVE TO CSS -->
	<style>
.hoverShadow:hover {
	border-radius: 5px;
	box-shadow: 0 5px 10px rgba(80, 0, 0, .3);
}
</style>
	<!-- MOVE TO CSS -->

	<f:verbatim>
		<script>
			//var OmniFaces=OmniFaces;
			var dataFull;
			//var isSingleLead=false; // determines which graph refresh function to call after a pan or zoom.
			var WF_minTime = 1, WF_maxTime = 5000;
			function show12LeadData(minTime, maxTime, ECG) {
				var namespace = '#{facesContext.externalContext.encodeNamespace('')}';
				WF_minTime = minTime;
				WF_maxTime = maxTime;
				dataFull = ""; // clear data variable.
				//var $show12LeadDataVar = $("#show12LeadData"); // A) Used to Show the data arrive on the screen 
				dataFull = WAVEFORM_parseCSV(ECG, namespace);
				
				// Turning on the Dygrahs Display
				WAVEFORM_showGraphs(namespace);
				WAVEFORM_zoomGraphX(minTime, maxTime); // Changes the dataWindow on all 12 leads.
				// WAVEFORM_backfillDataArray(dataFull);
				WAVEFORM_replaceDataArray(dataFull);
			}
	
			// This function is kept on the .xhtml page, because it contains code specific to this layout. 
             var WAVEFORM_showGraphs = function(namespace){
                 //alert("running WAVEFORM_showGraphs() in panelDisplayLeads.xhtml data.length:" + dataFull.length);
                 var graphDurationMS = 2500;
                 var graphWidthPx = 250;
                 var graphHeightPx = 150;
                 var calibrationCount = 3;
                 populateGraphsCalibrations(graphDurationMS, graphWidthPx, graphHeightPx, dataFull, namespace, calibrationCount)
             }
         </script>
	</f:verbatim>

	<h:panelGroup layout="block" styleClass="backgroundofContent">
		<p:layout id="graphView"
			style=" min-height:710px; height:720px; top:20px">
			<p:layoutUnit id="ecgGraphLayout" position="center"
				style="min-width:400px; 
								min-height:700px; 
								width:90%; 
								background-color:#fdf6e3; 
								margin:1px auto;">
				<ui:fragment id="panelMultipleGraph" autoUpdate="true"
					rendered="#{visualizeBacking.graphMultipleVisible}">
					<!-- <h:outputText value="namespace=#{facesContext.externalContext.encodeNamespace('')}" /> -->
					<ui:include src="12Lead_DIV.xhtml" />
					<script>
						var data = '#{visualizeBacking.data}';
						var dataJsonParse = JSON.parse(data);
						show12LeadData(dataJsonParse.minTime, dataJsonParse.maxTime, dataJsonParse.ECG);
					</script>
				</ui:fragment>

				<ui:fragment id="panelSingleGraph" autoUpdate="true"
					rendered="#{visualizeBacking.graphVisible}">
					<ui:include src="singleLeadFragment.xhtml" />
				</ui:fragment>
			</p:layoutUnit>

			<p:layoutUnit id="viewChangeButtons" position="east" resizable="true"
				size="150" minSize="50" maxSize="550">
				<ui:include src="include/viewChangeButtons.xhtml" />
			</p:layoutUnit>
		</p:layout>
	</h:panelGroup>
</ui:composition>